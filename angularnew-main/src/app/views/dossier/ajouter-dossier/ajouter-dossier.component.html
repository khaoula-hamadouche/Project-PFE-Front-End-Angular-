<mat-card class="p-4">
  <mat-horizontal-stepper linear>
    <!-- Étape 1: Numéro Dossier et Intitulé -->
    <mat-step [stepControl]="dossierForm.get('numeroDossier')! && dossierForm.get('intitule')!" label="Informations du Dossier">
      <form [formGroup]="dossierForm">
        <h4>Informations du Dossier</h4>
        <mat-form-field appearance="outline" class="w-full mb-4">
          <mat-label>Numéro de Dossier</mat-label>
          <input matInput formControlName="numeroDossier" required>
        </mat-form-field>

        <mat-form-field appearance="outline" class="w-full mb-4">
          <mat-label>Intitulé</mat-label>
          <input matInput formControlName="intitule" required>
        </mat-form-field>

        <div>
          <button mat-button matStepperNext>Suivant</button>
        </div>
      </form>
    </mat-step>

    <!-- Étape 2: Mode de Passation -->
    <mat-step [stepControl]="dossierForm.get('typePassation')!" label="Fichiers Requis">
      <form [formGroup]="dossierForm" class="space-y-6">
        <!-- Titre -->
        <div class="text-center mb-6">
          <h4 class="text-2xl font-bold">Sélection du Mode de Passation</h4>
        </div>

        <!-- Sélection du Type de Passation -->
        <mat-form-field appearance="outline" class="w-full mb-4">
          <mat-label>Type de Passation</mat-label>
          <mat-select formControlName="typePassation" (selectionChange)="onTypePassationChange($event.value)" required>
            <mat-option *ngFor="let passation of passations" [value]="passation">
              {{ passation }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <!-- Affichage des Fichiers Requis -->
        <div *ngIf="selectedFichiers.length > 0" class="mb-4">
          <h3 class="text-lg font-semibold mb-2">Fichiers Requis</h3>
          <div *ngFor="let fichier of selectedFichiers; let i = index" class="mb-2">
            <label class="block mb-1 font-medium">{{ fichier }} :</label>
            <br>
            <input type="file" (change)="onFileSelect($event, i)" class="border p-2 rounded w-full">
          </div>
        </div>

        <!-- Bouton Ajouter un Fichier Supplémentaire -->
        <button mat-raised-button color="primary" (click)="ajouterFichierSupplementaire()" class="mb-4">
          Ajouter un autre fichier
        </button>
<br> <br>
        <!-- Boutons de Navigation -->
        <div class="flex justify-between">
          <button mat-stroked-button matStepperPrevious>Précédent</button>
          <button mat-raised-button color="primary" matStepperNext>Suivant</button>
        </div>
      </form>
    </mat-step>

    <!-- Étape 3: Confirmation -->
    <mat-step label="Confirmation">
      <h4>Confirmation</h4>
      <p>Vérifiez les informations avant de soumettre le dossier.</p>

      <div>
        <strong>Numéro de Dossier :</strong> {{ dossierForm.get('numeroDossier')?.value }}<br>
        <strong>Intitulé :</strong> {{ dossierForm.get('intitule')?.value }}<br>
        <strong>Type de Passation :</strong> {{ dossierForm.get('typePassation')?.value }}<br>
        <strong>Fichiers :</strong>
        <ul>
          <li *ngFor="let fichier of selectedFichiers">{{ fichier }}</li>
        </ul>
      </div>

      <div>
        <button mat-button matStepperPrevious>Précédent</button>
        <button mat-raised-button color="primary" (click)="onSubmit()">Ajouter</button>
      </div>
    </mat-step>
  </mat-horizontal-stepper>
</mat-card>
